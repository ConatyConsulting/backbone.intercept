// Backbone.Intercept v0.4.2

!function(a,b){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(a,c){return b(a,c)});else if("undefined"!=typeof exports){var c=require("backbone"),d=require("underscore");module.exports=b(c,d)}else b(a.Backbone,a._)}(this,function(a,b){"use strict";return a.Intercept={VERSION:"0.4.2",rootSelector:"body",defaults:{trigger:!0,links:!0,forms:!0,precheck:!1},start:function(a){a=b.defaults(a||{},this.defaults),a.links&&this._getRootElement().on("click.backboneIntercept","a",b.bind(this._interceptLinks,this)),a.forms&&this._getRootElement().on("submit.backboneIntercept",b.bind(this._interceptForms,this))},stop:function(){this._getRootElement().off(".backboneIntercept")},navigate:function(b,c){a.history.navigate(b,c)},_getRootElement:function(){return this._body?this._body:(this._body=a.$(this.rootSelector),this._body)},_interceptForms:function(a){a.target&&a.target.action||a.preventDefault()},_interceptLinks:function(c){if(1===c.which){var d=a.$(c.currentTarget),e=d.attr("href");if(e){var f=this._getAttr(d,"bypass");if(void 0===f||"false"===f){var g={trigger:this.defaults.trigger},h=this._getAttr(d,"trigger");if("false"===h?g.trigger=!1:"true"===h&&(g.trigger=!0),!/^#|javascript:|mailto:|(?:\w+:)?\/\//.test(e)){var i=d[0].pathname.replace(/^\//,"")+d[0].search;if(this.defaults.precheck){var j=a.history.getFragment(i||"");if(j=a.history.decodeFragment(j.replace(/#.*$/,"")),!b.some(a.history.handlers,function(a){return a.route.test(j)?!0:void 0}))return}c.preventDefault(),this.navigate&&this.navigate(i,g)}}}}},_getAttr:function(a,b){var c=a.attr(b);if(void 0!==c)return c;var d=a.attr("data-"+b);return void 0!==d?d:void 0}},a.Intercept});
//# sourceMappingURL=backbone.intercept.min.js.map